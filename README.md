# üöÄ GarapaSystem

**Sistema de Gest√£o Empresarial Moderno**

Plataforma completa de gest√£o empresarial desenvolvida com Next.js 15, TypeScript e arquitetura Domain-Driven Design (DDD). Oferece funcionalidades avan√ßadas para administra√ß√£o de usu√°rios, clientes, colaboradores e processos de neg√≥cio com interface moderna e comunica√ß√£o em tempo real.

![Dashboard Principal](./screenshots/dashboard-principal-2025-09-06T14-11-55-405Z.png)

## ‚ú® Principais Funcionalidades

### üîê Sistema de Autentica√ß√£o e Seguran√ßa

O GarapaSystem oferece um sistema robusto de autentica√ß√£o com NextAuth.js, garantindo seguran√ßa e controle de acesso granular.

**Caracter√≠sticas:**
- Autentica√ß√£o segura com JWT tokens
- Sistema de sess√µes persistentes
- Controle de permiss√µes por perfil de usu√°rio
- Rate limiting para prote√ß√£o contra ataques
- Middleware de seguran√ßa em todas as rotas

![P√°gina de Login](./screenshots/login_page-2025-09-10T14-38-36-919Z.png)

### üë• Gest√£o Completa de Pessoas

Gerenciamento centralizado de todos os stakeholders do seu neg√≥cio com interface intuitiva e funcionalidades avan√ßadas.

**Funcionalidades:**
- **Usu√°rios**: Cadastro completo com perfis e permiss√µes personaliz√°veis
- **Clientes**: Base de clientes com hist√≥rico completo e m√∫ltiplos endere√ßos
- **Colaboradores**: Controle de funcion√°rios com informa√ß√µes detalhadas
- **Perfis e Permiss√µes**: Sistema granular de controle de acesso
- **Integra√ß√£o ViaCEP**: Preenchimento autom√°tico de endere√ßos

![Gest√£o de Clientes](./screenshots/clientes-gestao-2025-09-06T14-12-07-966Z.png)

### üè¢ Gest√£o Estrat√©gica de Neg√≥cios

Ferramentas completas para gest√£o de vendas e acompanhamento de performance empresarial.

**Recursos:**
- **Pipeline de Vendas**: Gest√£o visual de oportunidades com drag & drop
- **Dashboard Interativo**: M√©tricas em tempo real com gr√°ficos din√¢micos
- **Grupos Hier√°rquicos**: Organiza√ß√£o estrutural da empresa
- **Relat√≥rios Avan√ßados**: An√°lises detalhadas com exporta√ß√£o
- **KPIs Personaliz√°veis**: Indicadores customizados por setor

![Pipeline de Vendas](./screenshots/pipeline-vendas-completo-2025-09-06T14-18-23-046Z.png)

### ‚öôÔ∏è Integra√ß√µes e Automa√ß√£o Avan√ßada

Ecossistema completo de integra√ß√µes para conectar o GarapaSystem com outras ferramentas.

**Capacidades:**
- **Sistema de Webhooks**: Configura√ß√£o flex√≠vel de integra√ß√µes em tempo real
- **API RESTful Completa**: Endpoints documentados com Swagger UI
- **Chaves API**: Gera√ß√£o e gerenciamento seguro de acesso
- **Logs Detalhados**: Monitoramento completo de atividades do sistema
- **Sistema de Versioning**: Controle de vers√µes da aplica√ß√£o e API
- **Rate Limiting**: Prote√ß√£o contra abuso de recursos

![Configura√ß√µes de API](./screenshots/api-config-completo-2025-09-06T14-18-41-758Z.png)

### üìß Sistema de Webmail Profissional

Cliente de email completo integrado ao sistema, oferecendo uma experi√™ncia moderna e eficiente.

**Funcionalidades Principais:**
- **Interface Moderna**: Design responsivo e intuitivo
- **Suporte IMAP/SMTP**: Configura√ß√£o flex√≠vel de m√∫ltiplas contas
- **Composi√ß√£o Rica**: Editor avan√ßado para cria√ß√£o de emails
- **Sincroniza√ß√£o em Tempo Real**: Atualiza√ß√£o autom√°tica de pastas e mensagens
- **Gerenciamento de Pastas**: Organiza√ß√£o completa (Inbox, Enviados, Rascunhos, Lixeira)
- **Busca Avan√ßada**: Pesquisa r√°pida e eficiente com filtros
- **Configura√ß√µes Flex√≠veis**: Suporte a SSL/TLS e autentica√ß√£o segura

![Webmail - Estado Inicial](./screenshots/webmail_initial_state-2025-09-10T14-37-02-030Z.png)

![Webmail - Email Selecionado](./screenshots/email_clicked_state-2025-09-10T14-37-30-141Z.png)

### üîÑ Comunica√ß√£o em Tempo Real

Sistema avan√ßado de comunica√ß√£o bidirecional para atualiza√ß√µes instant√¢neas.

**Recursos:**
- **WebSocket**: Conex√µes persistentes para atualiza√ß√µes em tempo real
- **Notifica√ß√µes Push**: Sistema de alertas instant√¢neos
- **Sincroniza√ß√£o Autom√°tica**: Dados sempre atualizados em todos os dispositivos
- **Status de Conex√£o**: Indicadores visuais de conectividade

### ‚öôÔ∏è Configura√ß√µes e Monitoramento

Painel completo de configura√ß√µes e monitoramento do sistema.

**Caracter√≠sticas:**
- **Aba Sobre**: Informa√ß√µes detalhadas da aplica√ß√£o e verifica√ß√£o de atualiza√ß√µes
- **Configura√ß√µes de Sistema**: Painel completo de configura√ß√µes
- **Monitoramento em Tempo Real**: Status do sistema e performance
- **Logs de Auditoria**: Rastreamento completo de a√ß√µes do usu√°rio

## üõ†Ô∏è Stack Tecnol√≥gico

### Frontend
- **Next.js 15** - Framework React com App Router
- **TypeScript** - Tipagem est√°tica para maior seguran√ßa
- **Tailwind CSS** - Framework CSS utilit√°rio moderno
- **shadcn/ui** - Componentes UI acess√≠veis e customiz√°veis
- **Framer Motion** - Anima√ß√µes fluidas e interativas
- **React Hook Form + Zod** - Formul√°rios com valida√ß√£o robusta

### Backend
- **Prisma ORM** - Gerenciamento type-safe do banco de dados
- **PostgreSQL** - Banco de dados relacional robusto
- **NextAuth.js** - Autentica√ß√£o e autoriza√ß√£o segura
- **Socket.IO** - Comunica√ß√£o bidirecional em tempo real
- **Nodemailer** - Envio de emails via SMTP
- **IMAP Client** - Conex√£o e sincroniza√ß√£o com servidores IMAP
- **Email Parser** - Processamento e an√°lise de mensagens de email

### Infraestrutura
- **Docker** - Containeriza√ß√£o para deploy consistente
- **Rate Limiting** - Prote√ß√£o contra abuso de API
- **Middleware de Seguran√ßa** - Prote√ß√£o de rotas e endpoints

## üöÄ Como Utilizar

### üìã Pr√©-requisitos

Antes de come√ßar, certifique-se de ter instalado em sua m√°quina:

- **Node.js 18+** - [Download aqui](https://nodejs.org/)
- **PostgreSQL 14+** - [Download aqui](https://www.postgresql.org/download/)
- **Git** - [Download aqui](https://git-scm.com/)
- **Docker** (opcional, para ambiente containerizado) - [Download aqui](https://www.docker.com/)

### üîß Instala√ß√£o e Configura√ß√£o

#### 1. Clone o Reposit√≥rio
```bash
git clone https://github.com/garapadev/garapasystem.git
cd garapasystem
```

#### 2. Instale as Depend√™ncias
```bash
npm install
# ou
yarn install
```

#### 3. Configure o Banco de Dados

**Op√ß√£o A: PostgreSQL Local**
```bash
# Crie um banco de dados PostgreSQL
creatdb garapasystem
```

**Op√ß√£o B: Docker (Recomendado)**
```bash
# Inicie o PostgreSQL via Docker
docker-compose up -d postgres
```

#### 4. Configure as Vari√°veis de Ambiente
```bash
# Copie o arquivo de exemplo
cp .env.example .env.local

# Edite o arquivo .env.local com suas configura√ß√µes
nano .env.local
```

**Vari√°veis principais a configurar:**
```env
# Banco de Dados
DATABASE_URL="postgresql://usuario:senha@localhost:5432/garapasystem"

# NextAuth
NEXTAUTH_SECRET="seu-secret-aqui"
NEXTAUTH_URL="http://localhost:3000"

# Email (para webmail)
IMAP_HOST="seu-servidor-imap"
IMAP_PORT=993
SMTP_HOST="seu-servidor-smtp"
SMTP_PORT=587
```

#### 5. Execute as Migra√ß√µes do Banco
```bash
# Gere o cliente Prisma
npx prisma generate

# Execute as migra√ß√µes
npx prisma migrate dev

# (Opcional) Popule com dados de exemplo
npx prisma db seed
```

#### 6. Inicie a Aplica√ß√£o

**Desenvolvimento:**
```bash
npm run dev
```

**Produ√ß√£o:**
```bash
npm run build
npm start
```

### üåê Acessando a Aplica√ß√£o

1. **Aplica√ß√£o Principal**: `http://localhost:3000`
2. **Prisma Studio** (Gerenciamento do BD): `http://localhost:5555`
3. **API Documentation**: `http://localhost:3000/api/docs`

### üìß Configura√ß√£o do Webmail

1. Acesse "Configura√ß√µes" ‚Üí "Email"
2. Configure os servidores IMAP/SMTP:
   - **Host IMAP**: servidor de entrada
   - **Porta IMAP**: 993 (SSL) ou 143 (STARTTLS)
   - **Host SMTP**: servidor de sa√≠da
   - **Porta SMTP**: 587 (STARTTLS) ou 465 (SSL)
3. Teste a conex√£o
4. Acesse o webmail em "Email" no menu principal

### üîß Comandos √öteis

```bash
# Resetar banco de dados
npx prisma migrate reset

# Visualizar banco de dados
npx prisma studio

# Executar testes
npm test

# Verificar tipos TypeScript
npm run type-check

# Executar linting
npm run lint

# Formatar c√≥digo
npm run format
```

### üê≥ Execu√ß√£o com Docker

```bash
# Construir e executar todos os servi√ßos
docker-compose up -d

# Executar apenas o banco de dados
docker-compose up -d postgres

# Ver logs dos containers
docker-compose logs -f

# Parar todos os servi√ßos
docker-compose down
```

### ‚ö†Ô∏è Solu√ß√£o de Problemas

**Erro de conex√£o com banco:**
- Verifique se o PostgreSQL est√° rodando
- Confirme as credenciais no `.env.local`
- Execute `npx prisma db push` para sincronizar o schema

**Erro de autentica√ß√£o:**
- Verifique se `NEXTAUTH_SECRET` est√° definido
- Confirme se `NEXTAUTH_URL` est√° correto

**Problemas com webmail:**
- Verifique as configura√ß√µes IMAP/SMTP
- Confirme se as portas est√£o abertas
- Teste a conectividade com `telnet servidor porta`

##### üÜï Atualiza√ß√µes Recentes

#### Vers√£o 0.1.33 - Janeiro 2025
- üìß **Sistema de Webmail Completo**: Cliente de email integrado com suporte IMAP/SMTP
- ‚úâÔ∏è **Composi√ß√£o de Emails**: Editor rico para cria√ß√£o e envio de mensagens
- üìÅ **Gerenciamento de Pastas**: Organiza√ß√£o autom√°tica de emails (Inbox, Enviados, Rascunhos, Lixeira)
- üîÑ **Sincroniza√ß√£o em Tempo Real**: Atualiza√ß√£o autom√°tica de pastas e mensagens
- üîç **Busca de Emails**: Sistema de pesquisa avan√ßada integrado
- üõ†Ô∏è **Configura√ß√µes de Email**: Interface para configura√ß√£o de contas IMAP/SMTP
- üé® **Interface Moderna**: Design responsivo e intuitivo para o webmail
- üîß **Corre√ß√µes de Tipos TypeScript**: Melhorias na tipagem e estabilidade do c√≥digo

#### Vers√£o 0.1.32 - Setembro 2025
- ‚ú® **Nova Aba Sobre**: Informa√ß√µes detalhadas da aplica√ß√£o, API e verifica√ß√£o de atualiza√ß√µes
- üè† **M√∫ltiplos Endere√ßos**: Clientes agora podem ter v√°rios endere√ßos cadastrados
- üìä **Sistema de Versioning**: API para controle de vers√µes e verifica√ß√£o de atualiza√ß√µes
- üîß **Melhorias na Interface**: Componentes otimizados e experi√™ncia do usu√°rio aprimorada
- üêõ **Corre√ß√µes de Bugs**: Diversos ajustes e melhorias de estabilidade
- üì± **Responsividade**: Interface totalmente responsiva para dispositivos m√≥veis
- üîí **Seguran√ßa**: Implementa√ß√£o de rate limiting e middleware de seguran√ßa

## üìñ Primeiro Acesso

**Credenciais padr√£o:**
- Email: `admin@garapasystem.com`
- Senha: `password`

> ‚ö†Ô∏è **Importante**: Altere a senha imediatamente ap√≥s o primeiro login!

### üìß Acessando o Webmail

Ap√≥s fazer login no sistema, voc√™ pode acessar o webmail atrav√©s do menu lateral ou diretamente em:
- **Desenvolvimento**: [http://localhost:3000/webmail](http://localhost:3000/webmail)
- **Produ√ß√£o**: `https://seu-dominio.com/webmail`

**Configura√ß√£o de Email:**
1. Acesse o webmail
2. Clique em "Settings" (Configura√ß√µes)
3. Configure suas credenciais IMAP/SMTP:
   - **Servidor IMAP**: `imap.seu-provedor.com`
   - **Porta IMAP**: `993` (SSL) ou `143` (STARTTLS)
   - **Servidor SMTP**: `smtp.seu-provedor.com`
   - **Porta SMTP**: `465` (SSL) ou `587` (STARTTLS)
   - **Email e Senha**: Suas credenciais de email

**Funcionalidades Dispon√≠veis:**
- ‚úâÔ∏è Composi√ß√£o e envio de emails
- üìÅ Gerenciamento de pastas (Inbox, Enviados, Rascunhos, Lixeira)
- üîç Busca avan√ßada de mensagens
- üîÑ Sincroniza√ß√£o autom√°tica em tempo real
- üìé Suporte a anexos (em desenvolvimento)

## üîå API e Documenta√ß√£o

### Documenta√ß√£o Swagger
- **Desenvolvimento**: [http://localhost:3000/api/docs](http://localhost:3000/api/docs)
- **Produ√ß√£o**: `https://seu-dominio.com/api/docs`

### Principais Endpoints

| M√©todo | Endpoint | Descri√ß√£o |
|--------|----------|----------|
| `GET` | `/api/clientes` | Listar clientes |
| `POST` | `/api/clientes` | Criar cliente |
| `GET` | `/api/negocios` | Listar neg√≥cios |
| `POST` | `/api/negocios` | Criar neg√≥cio |
| `GET` | `/api/webhooks` | Listar webhooks |
| `POST` | `/api/webhooks` | Criar webhook |
| `GET` | `/api/email/folders` | Listar pastas de email |
| `POST` | `/api/email/send` | Enviar email |
| `GET` | `/api/email/messages` | Listar mensagens |
| `POST` | `/api/email/config` | Configurar conta de email |

### Exemplo de Uso da API

```javascript
// Criar um novo cliente
const cliente = {
  nome: "Empresa XYZ Ltda",
  email: "contato@empresaxyz.com",
  telefone: "+55 11 99999-9999"
};

const response = await fetch('/api/clientes', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
    'Authorization': 'Bearer sua-api-key'
  },
  body: JSON.stringify(cliente)
});
```

## üìÅ Estrutura do Projeto

```
garapasystem/
‚îú‚îÄ‚îÄ üìÅ src/
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ app/               # P√°ginas e rotas (App Router)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ api/           # Endpoints da API
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ clientes/      # Interface de clientes
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ colaboradores/ # Interface de colaboradores
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ configuracoes/ # Configura√ß√µes do sistema
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ usuarios/      # Interface de usu√°rios
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üìÅ webmail/       # Sistema de webmail
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ components/        # Componentes reutiliz√°veis
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ hooks/             # Hooks customizados
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ lib/               # Utilit√°rios e configura√ß√µes
‚îÇ   ‚îî‚îÄ‚îÄ üìÅ types/             # Defini√ß√µes de tipos
‚îú‚îÄ‚îÄ üìÅ prisma/                # Configura√ß√£o do banco de dados
‚îú‚îÄ‚îÄ üìÅ public/                # Arquivos est√°ticos
‚îú‚îÄ‚îÄ docker-compose.yml        # Orquestra√ß√£o Docker
‚îî‚îÄ‚îÄ package.json              # Depend√™ncias e scripts
```

## üß™ Scripts Dispon√≠veis

```bash
# Desenvolvimento
npm run dev          # Servidor de desenvolvimento
npm run build        # Build para produ√ß√£o
npm run start        # Servidor de produ√ß√£o

# Banco de Dados
npm run db:generate  # Gera cliente Prisma
npm run db:migrate   # Executa migra√ß√µes
npm run db:seed      # Popula banco com dados iniciais

# Docker
docker-compose up -d    # Inicia todos os servi√ßos
docker-compose down     # Para todos os servi√ßos
```

## üöÄ Deploy

### Deploy com Docker
```bash
# Build da imagem
docker build -t garapasystem:latest .

# Executar container
docker run -d \
  --name garapasystem \
  -p 3000:3000 \
  --env-file .env \
  garapasystem:latest
```

### Vari√°veis de Ambiente de Produ√ß√£o
```env
NODE_ENV=production
DATABASE_URL=postgresql://user:pass@host:5432/db
NEXTAUTH_SECRET=sua-chave-super-segura
NEXTAUTH_URL=https://seu-dominio.com
```

## ü§ù Contribui√ß√£o

Contribui√ß√µes s√£o bem-vindas! Por favor:

1. Fa√ßa um fork do projeto
2. Crie uma branch para sua feature (`git checkout -b feature/nova-funcionalidade`)
3. Commit suas mudan√ßas (`git commit -m 'feat: adiciona nova funcionalidade'`)
4. Push para a branch (`git push origin feature/nova-funcionalidade`)
5. Abra um Pull Request

### Padr√µes de Commit
Utilizamos [Conventional Commits](https://www.conventionalcommits.org/):
- `feat:` nova funcionalidade
- `fix:` corre√ß√£o de bug
- `docs:` atualiza√ß√£o de documenta√ß√£o
- `style:` formata√ß√£o de c√≥digo
- `refactor:` refatora√ß√£o
- `test:` adi√ß√£o de testes

## üìÑ Licen√ßa

Este projeto est√° licenciado sob a **Licen√ßa MIT**. Veja o arquivo [LICENSE](LICENSE) para detalhes.

## üìû Suporte

- **Issues**: [GitHub Issues](https://github.com/garapadev/garapasystem/issues)
- **Discuss√µes**: [GitHub Discussions](https://github.com/garapadev/garapasystem/discussions)
- **Email**: suporte@garapadev.com

## üìà Status do Projeto

### ‚úÖ Funcionalidades Implementadas
- **Arquitetura DDD**: Implementada com padr√µes modernos
- **Sistema de Autentica√ß√£o**: NextAuth.js configurado e funcional
- **Banco de Dados**: PostgreSQL com Prisma ORM e migra√ß√µes
- **Interface Moderna**: Tailwind CSS + shadcn/ui responsiva
- **WebSocket**: Comunica√ß√£o em tempo real implementada
- **Containeriza√ß√£o**: Docker e Docker Compose configurados
- **Sistema de Versioning**: API de vers√µes e verifica√ß√£o de atualiza√ß√µes
- **M√∫ltiplos Endere√ßos**: Suporte completo para clientes com v√°rios endere√ßos
- **Configura√ß√µes Avan√ßadas**: Painel de configura√ß√µes com aba Sobre
- **API RESTful**: Endpoints completos com documenta√ß√£o Swagger
- **Sistema de Logs**: Monitoramento detalhado de atividades
- **Sistema de Webmail**: Cliente de email completo com IMAP/SMTP
- **Composi√ß√£o de Emails**: Editor rico para cria√ß√£o de mensagens
- **Sincroniza√ß√£o de Email**: Atualiza√ß√£o autom√°tica em tempo real
- **Gerenciamento de Pastas**: Organiza√ß√£o completa de emails

---

**GarapaSystem** - Sistema de gest√£o empresarial moderno e eficiente üöÄ

*Desenvolvido com ‚ù§Ô∏è pela equipe GarapaDev* do ceara para o Mundo!
